<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <!-- <meta name="viewport" content="width=device-width,initial-scale=1" /> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- Linking the new CSS files -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/layout.css">
  <script src="js/main.js" defer type="module"></script>
  <title>Expo Video Controller</title>
</head>
<body>
  <div id="tapTarget" class="tap-target"></div>

  <!-- Password Wall -->
  <div id="passwordWallContainer" class="page-container hidden">
    <div class="card">
      <h2>Enter Password</h2>

      <form id="passwordForm" onsubmit="return false;">
        <div class="form-row mt-10">
          <label for="passwordInput">Password</label>
          <input id="passwordInput" type="password" required />
        </div>

        <div class="form-row justify-center mt-15">
          <button type="button" onclick="submitPassword()">Unlock</button>
        </div>
      </form>

      <div id="passwordStatus" class="status error"></div>

      <hr class="divider">

      <div class="form-row justify-center">
        <button onclick="showStartScreen()">Cancel</button>
      </div>
    </div>
  </div>


  <!-- OSC Config Form -->
  <div id="configFormContainer" class="page-container hidden">
    <div class="card">
      <h2>OSC Target Configuration</h2>

      <form id="targetForm" onsubmit="return false;">
        <div class="form-row">
          <label for="hostInput">OSC Host</label>
          <input id="hostInput" type="text" placeholder="127.0.0.1" />
        </div>

        <div class="form-row">
          <label for="portInput">OSC Port</label>
          <input id="portInput" type="number" placeholder="57120" min="1" max="65535" />
        </div>

        <div class="form-row">
          <button id="setTargetBtn" type="button" onclick="setTarget()">Set Target</button>
          <button id="setTargetTestBtn" type="button" onclick="setTargetAndTest()">Set + Test</button>
        </div>
      </form>

      <div id="configStatus" class="status"></div>

      <hr class="divider">

      <div class="form-row" style="gap:12px;">
        <button onclick="showStartScreen()">Back to Controller</button>
        <button class="reset-btn" onclick="sendHolding()">Reset Video Playback</button>
      </div>
    </div>
  </div>

  <!-- Main Content Container: Contains the multi-step leadForm -->
  <div id="mainContent" class="page-container controller-page">
    <div class="main-card lead-card">
      <!-- Title and Instructions change dynamically based on step -->
      <h2 id="controllerTitle"></h2>
      <!-- <p style="margin-bottom: 20px; font-size: 20px; color: #000000;" id="leadInstructions">Please enter your details</p> -->

      <form id="leadForm" onsubmit="return false;">
        <!-- STEP 1: Name and Email (Visible initially) -->
        <div id="formStep1" class="form-step form-step-1">
          <div class="form-row mt-10">
            <label for="nameInput" class="bilingual-label">
              <span class="label-en">Name</span>
              <span class="label-ar" lang="ar" dir="rtl">اﻻﺳﻢ</span>
            </label>
            <input id="nameInput" type="text" aria-label="Name — اﻻﺳﻢ"/>
          </div>

          <div class="form-row mt-10">
            <label for="nationalityInput" class="bilingual-label">
              <span class="label-en">Nationality</span>
              <span class="label-ar" lang="ar" dir="rtl">اﻟﺠﻨﺴﻴﺔ</span>
            </label>
            <input id="nationalityInput" type="text" aria-label="Nationality — اﻟﺠﻨﺴﻴﺔ"/>
          </div>

          <div class="form-row mt-10">
            <label for="emailInput" class="bilingual-label">
              <span class="label-en">E-mail</span>
              <span class="label-ar" lang="ar" dir="rtl">اﻟﺒﺮﻳﺪ اﻹﻟﻜﺘﺮوﻱ</span>
            </label>
            <input id="emailInput" type="email" aria-label="E-mail — اﻟﺒﺮﻳﺪ اﻹﻟﻜﺘﺮوﻱ"/>
          </div>

          <div class="form-row mt-10">
            <label for="phoneInput" class="bilingual-label">
              <span class="label-en">Mobile Number</span>
              <span class="label-ar" lang="ar" dir="rtl">رﻗﻢ اﻟﻬﺎﺗﻒ</span>
            </label>
            <input id="phoneInput" type="text" aria-label="Mobile Number — رﻗﻢ اﻟﻬﺎﺗﻒ"/>
          </div>

          <div class="btn-row mt-15">
            <button type="button" class="primary-btn" onclick="submitLeadForm()" aria-label="Next — التالي">
              <span class="bilingual-btn">
                <span class="label-ar">التالي</span>
                <span class="label-en">Next</span>
              </span>
            </button>
          </div>
          <div id="leadStatus" class="status statusbar error hidden"></div>
        </div>

        <!-- STEP 2: Video Controls (Initially hidden) -->
        <div id="formStep2" class="form-step form-step-2 hidden">
          <div class="buttons-row">
            <button onclick="send(1)" data-video-id="1" value="ADHD" duration="10" aria-label="ADHD Spectrum — اﻻﺩﻫﺖ">
              <span class="btn-icon">
                <img class="btn-img" src="./svg/icons-01.svg" alt="ADHD icon">
              </span>

              <span class="bilingual-btn" aria-hidden="false">
                <span class="label-ar">اﺿﻄﺮاب ﻓﺮط اﻟﺤﺮﻛﺔ</span>
                <span class="label-en">ADHD Spectrum</span>
              </span>
            </button>

            <button onclick="send(2)" data-video-id="2" value="Schizophrenic" duration="61" aria-label="Schizophrenia — اﻟﺰﻫﺎﺩ">
              <span class="btn-icon">
                <img class="btn-img" src="./svg/icons-02.svg" alt="Schizophrenia icon">
              </span>
              <span class="bilingual-btn">
                <span class="label-ar">اﻟﻔُﺼﺎم</span>
                <span class="label-en">Schizophrenia</span>
              </span>
            </button>

            <button onclick="send(3)" data-video-id="3" value="Autistic" duration="62" aria-label="Autism — اﻻﻧﺘﺮ">
              <span class="btn-icon">
                <img class="btn-img" src="./svg/icons-03.svg" alt="Autism icon">
              </span>
              <span class="bilingual-btn">
                <span class="label-ar">اﺿﻄﺮاب ﻃﻴﻒ اﻟﺘﻮﺣﺪ</span>
                <span class="label-en">Autism Spectrum Disorder</span>
              </span>
            </button>
          </div>

          <hr class="divider">

        </div>
        <div id="status" class="status statusbar hidden"></div>
        
        <!-- STEP 3: Thank You Screen (Initially hidden) -->
        <div id="formStep3" class="form-step form-step-3 hidden" style="text-align: center; padding: 40px 0;">
          <div class="step3-content">
            <!-- image on top -->
            <img
              src="./img/Sage logo.png"
              alt="Sage Clinics logo and partners"
              class="step3-image"
              loading="lazy"

            />

            <!-- bilingual block beneath the image -->
            <h2 class="step3-bilingual" aria-hidden="false">
              <span class="label-ar" dir="rtl" lang="ar">
                اﻟﺘﺠﺮﺑﺔ ﺧﻀﻌﺖ ﻟﻠﻤﺮاﺟﻌﺔ اﻟﺴﺮﻳﺮﻳﺔ واﻟﺘﺤﻘﻖ ﻣﻦ اﻟﺤﻘﺎﺋﻖ ﻣﻦ ﻗﺒﻞ ﺷﺮﻛﺎﺋﻨﺎ ﻓﻲ اﻟﺮﻓﺎه
                اﻟﻨﻔﺴﻲ ﻓﻲ ﻣﺮﻛﺰ ﺳﻴﺞ
              </span>
              <span class="label-en">
                This experience has been clinically reviewed and fact-checked<br>
                by our mental wealth partners at Sage Clinics.
              </span>
            </h2>
          </div>
        </div>
        
        <!-- Hidden Submit Button -->
        <button type="submit" id="hiddenSubmitBtn" style="display: none;" aria-hidden="true">Submit Lead Form</button>
      </form>
    </div>
  </div>
</body>
</html>
